<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>webgl renderer</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Romuald Kowalczyk">
    <style>
        body, canvas, html{
            display:block;
            border:0;
            margin:0;overflow:hidden
        }

        body {
            background-image: url("bg.png");
        }

        canvas {
            border: 1px solid black;
            margin: 20px auto;
        }
    </style>
</head>
<body>
<canvas width="320", height="240"></canvas>
<script type="text/javascript" src="math.js"></script>
<script type="text/javascript" src="webgl.js"></script>
<script type="text/javascript">


canvas = document.getElementsByTagName('canvas')[0];

var image = new Image();
image.src = 'tileset.png';

image.onload = function() {
    var ppu = Webgl;
    var ctx = ppu.getContext(canvas);
    ppu.init(ctx);
    var tls = ppu.getTileset(ctx, image);
    ppu.setTileset(ctx, tls);

    var sprites = [
        {sx: 0, sy: 0, sw: 32, sh: 32,
        x: 100, y: 100, w: 32, h: 32,
        a: 0, ox: 16, oy: 16},
        {sx: 0, sy: 32, sw: 32, sh: 32,
        x: 200, y: 150, w: 64, h: 64,
        a: 45, ox: 0, oy: 0}
    ];


    for(var i = 0; i < 10; i++) {
        sprites.push({
            sx: 0, sy: 32, sw: 32, sh: 32,
        x: Math.random() * 320, y: Math.random() * 240, w: 18, h: 18,
        a: Math.random()*360, ox: 0, oy: 0
        });
    }

    ppu.clear(ctx, [255,255,255]);
    ppu.drawSprites(ctx, sprites);
}

</script>
</body>
</html>