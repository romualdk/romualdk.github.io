<html>
  <body>
    <canvas id="screen"></canvas>
  <script type="text/javascript">
  
var canvas = document.getElementById('screen')
var ctx = canvas.getContext('2d')
canvas.width = 10000
canvas.height = 10000

/*
IN
5
2
100 100 100
500 100 100
3
100 100 100
500 100 100
300 100 100
2
100 100 50
100 100 100
2
100 100 100
0 104 5
4
10 10 10
135 10 10
10 60 10
135 60 10

OUT 
1428.3185307180
1428.3185307180
628.3185307180
630.4821533843
412.8318530718
*/

var test = `-301 157 92
354 636 88
889 -849 34
849 53 72
-362 -698 125
-316 593 46
604 879 111
-496 -435 1
-296 -323 18
-599 -99 123
752 462 11
863 -85 12
-318 -55 124
205 750 32
-122 -108 35
600 964 85
-77 68 91
-252 63 112
22 4 73
-532 129 39
364 -364 95
-271 668 103
256 -716 83
-596 -311 110
-541 -400 87
448 713 20
519 -494 69
-194 -237 86
-582 199 104
-553 -777 68
451 -102 105
-990 -925 51
419 469 71
-304 220 38
-757 -755 121
-100 -24 99
731 102 10
714 -58 66
436 532 109
-252 -905 97
344 245 49
-154 276 93
-126 955 128
-816 639 49
-664 -922 94
-682 -247 21
913 -735 124
-773 753 118
-816 -10 70
808 -441 119
551 227 44
822 -558 111
-698 700 2
281 -853 26
-639 273 15
-492 376 122
-829 -736 69
877 -253 83
464 881 66
-404 -747 84
961 -638 20
-412 -127 25
-250 -471 125
-609 780 7
-59 173 22
831 418 102
-86 688 63
721 -889 45
353 -510 52
936 856 88
253 -724 30
-405 -71 74
-495 536 23
487 -57 116
-896 -913 107
-345 -194 39
-729 297 92
-855 360 11
652 -349 115
92 -316 103
894 464 12
-508 -911 76
628 718 98
209 493 52
880 277 70
910 -186 58
929 -905 58
167 -308 82
-468 387 76
341 -890 23
850 990 114
-186 432 119
607 776 55
479 -244 9
360 -270 82
817 -231 98
-507 -701 83
666 -952 119
867 -251 2
-324 125 100
-411 -204 64
727 738 50
531 -749 2
-413 -145 127
847 -363 108
951 435 38
934 600 20
62 596 127
-244 142 13
-591 951 109
578 -456 4
985 -294 64
-1000 141 53
-430 875 1
471 -496 108
-40 863 77
-298 156 60
155 439 52
-612 -46 84
-593 -351 64
616 804 37
561 -336 84
347 -666 55
39 817 121
65 -793 47
86 469 77
-125 -364 13
211 -202 59
-463 803 123
-690 956 35
-639 263 10
506 952 12
-44 378 101
-811 657 65
627 788 27
-217 52 113
-544 -906 19
-188 -654 95
753 305 5
788 -819 112
-703 -383 38
-566 2 116
225 490 110
605 -722 40
-37 842 79
-1 -272 22
687 -331 116
872 -830 96
788 -101 64
749 539 61
638 397 129
-247 100 65
-317 -464 7
880 -484 84
407 -876 2
-756 -607 18
177 -135 67
-555 -216 97
-284 -694 25
-61 48 69
-109 136 118
-41 73 99
720 -142 106
711 -509 125
-471 -674 2
669 240 39
374 -467 70
515 -300 69
-738 823 64
904 610 103
-356 -265 53
-349 149 27
-412 974 42
144 852 17
579 -810 119
-492 44 122
115 770 10
71 -820 20
-442 665 19
-692 -589 125
6 800 91
142 893 110
163 -971 78
-654 321 12
859 162 74
-291 -841 73
33 -908 112
608 895 101
-451 -628 10
-634 897 78
151 -753 67
12 466 86
-553 351 70
-207 -549 113
125 -445 9
926 249 80
928 606 84
715 589 43
907 184 119
-221 379 19
470 917 25
-640 238 58
-204 -635 18
232 56 82
816 641 1
192 442 91
198 -249 75
-870 801 9
140 -126 96
886 -501 69
808 -839 12
625 -722 39
-567 917 12
-932 506 17
167 582 93
-844 -621 81
-102 -458 130
-253 347 11
-683 -926 33
304 598 112
752 427 25
727 -565 88
-536 -112 14
-182 -39 30
555 -733 20
632 -433 88
-652 -379 103
-69 407 29
-459 196 23
203 -46 31
-643 -270 36
867 823 67
-621 -356 52
-697 -78 124
932 743 46
-274 18 82
-799 -474 24
-283 -865 29
-844 -69 73
-710 457 23
-911 486 115
855 -822 60
929 -784 123
-334 510 93
760 232 117
-974 -914 121
-683 636 122
-835 -314 73
-612 58 75
415 982 121
-208 -341 52
199 994 53
662 353 121
-781 403 74
755 -455 3
-695 -496 1
985 -527 96
247 127 62
864 -604 57
-757 298 24
-876 142 62
-630 27 38
-632 -922 30
-305 641 28
690 -649 43
-725 106 92
201 -679 78
161 302 37
83 -999 60
459 -672 14
58 -932 49
594 766 58
-226 -135 2
-696 307 12
494 586 99
-68 -303 3
686 883 73
509 148 86
811 -782 20
-201 -313 22
447 -104 23
861 -510 3
733 -390 94
-398 -306 130
971 300 104
-314 884 37
179 341 61
-923 -29 83
-371 -444 27
139 -327 16
797 316 93
986 -692 96
-694 422 16
-925 -299 11
-873 530 125
19 -73 123
79 690 3
134 -494 16
-339 136 27
910 314 103
-542 967 22
95 793 54
533 -345 121
957 174 15
513 -680 41
675 -108 57
107 -572 95
411 -62 93
-103 820 74
855 217 55
-844 -410 59
464 673 111
-435 -900 41
312 -195 96
41 -645 29
556 -328 103
700 -873 7
925 -21 110
-234 850 95
666 -49 34
-683 -647 106
-976 -136 4
999 -278 20
-653 -390 84
-255 -326 95
786 -212 103
-72 -240 21
-597 -988 68
197 -918 56
101 -489 89
287 -529 62
-143 -704 36
843 -54 1
811 -955 70
-977 600 111
327 485 103
-236 414 2
-924 -232 84
210 -423 130
-807 -228 83
-683 -170 110
30 -279 17
-485 18 89
386 -672 5
290 131 129
-178 -750 108
127 491 40
-286 -326 50
659 541 42
771 852 92
22 -598 96
-524 -65 115
59 -517 78
674 -329 124
203 -247 33
-685 720 20
-617 436 43
-188 -788 77
949 -819 10
611 917 117
721 923 130
756 563 6
-312 330 16
917 -530 45
-7 559 77
-610 562 80
405 234 10
940 62 30
788 439 74
377 -613 112
241 -107 101
-411 861 96
876 -556 24
-450 96 70
125 275 13
907 513 104
540 776 15
57 557 34
-85 -539 92
0 754 61
-674 812 21
-940 602 42
-63 -6 62
-97 -576 124
235 551 116
172 501 44
-875 -267 39
757 10 118
-249 -862 61
532 752 90
91 -779 74
-841 197 96
-433 -320 79
-66 4 1
-473 933 55
-137 14 5
-937 -974 105
-111 665 109
211 554 120
-696 -507 18
-932 880 70
-900 -903 33
-940 -172 2
889 -721 71
635 60 123
-783 -599 85
-377 -172 67
790 -464 108
-667 -72 83
614 -37 96
-742 549 107
-575 -694 50
-632 543 2
-995 -342 69
193 158 115
775 -771 90
-366 985 94
875 -85 66
527 -709 104
614 164 31
-979 719 101
526 965 73
-490 979 44
-892 -575 25
522 310 3
49 261 127
-763 93 95
978 77 50
867 752 22
306 -791 23
84 965 91
775 -793 51
457 -523 50
410 -66 113
-106 -605 27
-479 -673 88
-529 -903 15
661 512 12
-909 -77 81
270 327 44
441 766 49
896 262 32
-889 -953 24
769 -241 31
877 -974 117
905 400 27`
/*
test = `100 100 100
500 100 100`*/

var circles = []

var lines = test.split(/\r?\n/)
for (var i in lines) {
  var n = lines[i].split(' ')
  circles.push([n[0] * 1, n[1] * 1, n[2] * 1])
}

console.log(circles)

/*
var circles = [
  [10, 10, 10],
[135, 10, 10],
[10, 60, 10],
[135, 60, 10]
]*/

var sx = 10
var sy = 10

// draw circle
for (var i in circles) {
  ctx.beginPath();
  ctx.arc(sx + circles[i][0], sy + circles[i][1], circles[i][2], 0, 2 * Math.PI);
  ctx.stroke(); 
}

var points = []
var cp = 360
var step = 2 * Math.PI / cp

for (var i in circles) {
  for (var ii = 0; ii < cp; ii++) {
    var ox = circles[i][0]
    var oy = circles[i][1]
    var r = circles[i][2]
    var a = ii * step

    points.push({
      x: ox + r * Math.sin(a),
      y: oy +  r * Math.cos(a)
    })
  }
}



// draw points
for (var i in points) {
  ctx.fillRect(sx + points[i].x - 1, sy + points[i].y - 1, 3, 3)
}
  
  
  
let h = QuickHull(points)

// draw hull points
ctx.fillStyle = 'green'

for (var i in h) {
  ctx.fillRect(sx + h[i].x - 3, sy + h[i].y - 3, 6, 6)
}
  
function distance (p1, p2) {
  var a = p1.x - p2.x;
  var b = p1.y - p2.y;

  return Math.sqrt( a*a + b*b );
}

function circumference(points) {
  var l = points.length
  //var sum = distance[points[0], points[l - 1]]
  var sum = 0

  for (var i = 0; i < l - 1; i++) {
    sum += distance(points[i], points[i+1])
  }

  return sum
}


console.log(circumference(h))






var hull = [];

function QuickHull(points) {
    hull = [];
    //if there are only three points, this is a triangle, which by definition is already a hull
    if(points.length == 3) {
        points.push(points[0]); //close the poly
        return points;
    }
    var baseline = getMinMaxPoints(points);
    addSegments(baseline, points);
    addSegments([baseline[1], baseline[0]], points); //reverse line direction to get points on other side
    //add the last point to make a closed loop
    hull.push(hull[0]);
    return hull;
}

/**
 * Return the min and max points in the set along the X axis
 * Returns [ {x,y}, {x,y} ]
 * @param {Array} points - An array of {x,y} objects
 */
function getMinMaxPoints(points) {
    var i;
    var minPoint;
    var maxPoint;

    minPoint = points[0];
    maxPoint = points[0];

    for(i=1; i<points.length; i++) {
        if(points[i].x < minPoint.x)
            minPoint = points[i];
        if(points[i].x > maxPoint.x)
            maxPoint = points[i];
    }

    return [minPoint, maxPoint];
}

/**
 * Calculates the distance of a point from a line
 * @param {Array} point - Array [x,y]
 * @param {Array} line - Array of two points [ [x1,y1], [x2,y2] ]
 */
function distanceFromLine(point, line) {
    var vY = line[1].y - line[0].y;
    var vX = line[0].x - line[1].x;
    return (vX * (point.y - line[0].y) + vY * (point.x - line[0].x))
}

/**
 * Determines the set of points that lay outside the line (positive), and the most distal point
 * Returns: {points: [ [x1, y1], ... ], max: [x,y] ]
 * @param points
 * @param line
 */
function distalPoints (line, points) {
  var i
  var outer_points = []
  var point
  var distal_point
  var distance=0
  var max_distance=0

  for (i = 0; i < points.length; i++) {
    point = points[i]
    distance = distanceFromLine(point,line)

    if (distance > 0) outer_points.push(point)
    else continue

    if (distance > max_distance) {
      distal_point = point
      max_distance = distance
    }
  }

  return { points: outer_points, max: distal_point }
}

/**
 * Recursively adds hull segments
 * @param line
 * @param points
 */
function addSegments(line, points) {
  var distal = distalPoints(line, points)
  if(!distal.max) return hull.push(line[0])
  addSegments([line[0], distal.max], distal.points)
  addSegments([distal.max, line[1]], distal.points)
}

var circles = [
  [100, 100, 100],
  [500, 100, 100]
]

var points = []
var cp = 4
var step = 2 * Math.PI / cp

for (var i in circles) {
  for (var ii = 0; ii < cp; ii++) {
    var ox = circles[i][0]
    var oy = circles[i][1]
    var r = circles[i][2]
    var a = ii * step

    points.push({
      x: ox + r * Math.sin(a),
      y: oy + r * Math.cos(a)
    })
  }
}
  
  
  </script>
  </body>
</html>